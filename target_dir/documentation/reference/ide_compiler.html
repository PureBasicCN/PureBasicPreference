<html><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>编译你的程序</title></head>
<body bgcolor="#EFF1F0" link="#3A3966" vlink="#000000" alink="#000000">
<font face="Verdana, sans-serif" size="2"><p align="center"><b><font size="5">编译你的程序</font></b></p>

编译程序其实很简单。只要在菜单中选择“编译/运行”（快捷键默认为F5），你的程序将会被编译并进行一次测试运行。<br><br>若要设置编译方式，你可以打开“编译选项”对话框。在这里所做的设置会与当前的源文件或项目关联，并且保存源码或工程时，设置信息同样也会被保存。 可以对这个保存信息的地方进行设置。默认情况下，配置信息会被保存在源代码的结尾处（在IDE中不可见）。<br><br>在编译时产生一个错误阻止程序继续编译的情况下，编译将中止并显示错误消息。此消息会被记录到错误日志中，导致出错的错误行也会被标记出来。<br><br>为了方便对程序进行测试、移植更容易，已经从PureBasic中移除的旧版本的一些功能函数为了兼容将仍然可用一段时间。如果这些旧版功能函数在代码中使用，编译器会发出警告。编译过程中会弹出窗口并显示警告提示。双击警告信息将会显示导致警告的代码行。请注意，这种兼容不会无限期地保持，软件会在以后的更新中移除这些旧函数，因此建议更新并修复导致编译器警告的代码，而不是依赖于软件过渡过程中对旧函数的兼容。 

<p><b>编译菜单</b></p><blockquote>


<p><img src="images/ide_menu_compile.png"></p>

<b>编译/运行</b> <br>编译器会按照设置的编译选项对当前的源代码进行编译并执行它。可执行文件存储在一个临时位置，但它会与源代码的目录作关联路径被执行；所以从源代码同一目录下加载文件将正常工作。<br><br>这里源代码不需要保存（但是任何<a href="includes.html">包含文件</a>必须保存）。<br><br>此“编译/运行”选项遵从编译器选项及调试器（启用或禁用）的调试器设置（他们设置相同）。<br><br><b>运行EXE</b> <br>这再次执行最后一次编译的源代码。是否启用调试器依赖于上次编译器的设置。<br><br><b>调试编译</b> <br>和“编译/运行”菜单相同对程序进行编译，但忽略调试器设置而是直接启用编译调试器。当启用调试器开关关闭，但你又想对程序进行调试编译时，用此菜单项是很有用的。<br><br><b>不启用调试编译</b> <br>与“调试器编译”相似，但它强制不启用调试器对代码进行编译。<br><br><b>重新启动编译器</b> （不适用于所有系统） <br>这使编译器重新启动。它还会使编译器重新加载所有的库和 resident 文件，并且还有已知的PureBasic功能函数命令，更新过的结构，接口和常量列表等。当你在PB目录中添加了一个新的用户库，但不希望重新启动整个IDE这个功能非常有用。这对Lib库开发者测试他们的Lib库是特别有用的。<br><br><b>编译器选项</b> <br>这将打开编译器选项对话框，让您设置这个源文件的编译选项。<br><br><b>生成可执行文件</b> <br>这将打开一个保存对话框，要求输入文件名称来创建可执行文件。如果可执行文件格式设置为DLL，它将会在Windows中创建DLL，在Linux创建shared object（共享对象），在OS X上创建dylib。在创建'.app' 的应用程序时将捆绑执行时必要的目录结构，包括图标。如果设置不是'.app'，那么会创建一个常规控制台的可执行文件。<br><br><b>设置默认目标</b><br>当一个项目打开时，这个子菜单就会显示所有编译目标，并允许快速切换当前默认目标。默认的目标是用“编译/运行”菜单项编译/运行的一个目标。。<br><br><b>创建目标</b> <br>当一个项目打开，这个子菜单显示所有的编译目标，并允许直接编译其中之一。<br><br><b>创建所有目标</b> <br>当一个项目打开，这个菜单项会编译在编译器选项启用的所有目标。将打开一个显示生成进度窗口。 


</blockquote>
<p><b>非项目文件编译器选项</b></p><blockquote>


<p><img src="images/ide_compiler_options.png"></p>

<b>主源文件</b> <br>通过启用此选项，您可以定义将要发送给编译器的另一个文件，而不是当前文件。当您正在编辑一个文件，但它本身并不运行，而是<a href="includes.html">包含included</a>到另一个文件中，你可以使用此选项告诉编译器对其他文件进行编译运行。<br><br>注意：使用此选项时，您必须编译之前保存源代码，因为只有写入到磁盘文件才会被主源文件所包含引用。大多数的编译器设置将从主源文件中取出，所以在设置这个程序时，他们是禁用的。当前源文件调试器设置只有少部分设置被使用。<br><br><b>使用编译器</b><br>此选项允许选择使用不同的编译器来代替当前purebasic的版本编译器。这使得它易于编译的相同程序的不同版本（x86和x64）而无需重启IDE的编译器进行编译。此选项的附加编译器必须在<a href="ide_preferences.html">preferences</a>选项中配置。<br><br>如果编译器版本与默认编译器相匹配，但目标处理器是不同的则IDE的内置调试器仍然可以用于调试编译的可执行文件。这意味着，用x86编译器编译的可执行文件可以使用 x64 IDE进行调试，反之亦然。如果版本不匹配，则将使用选定的编译器的独立调试器进行调试，以避免版本冲突。<br><br><b>使用图标</b> (仅限 Windows 和 MacOS X 系统) <br>在这里您可以设置一个在浏览器中可以查看的创建的可执行文件的图标。它正在你的程序窗口的标题栏和任务栏显示。<br><br>Windows：图标必须是ICO格式（Windows 图标）<br><br>MacOS X: 图标必须是ICNS格式（Macintosh 图标）。To create such an icon, you should create PNG files in the dimensions 128x128, 48x48, 32x32 and 16x16 of your image and then use the tool "Icon Composer" that comes with the OSX developer tools to create the ICNS file. It should be located in /Developer/Applications/Utilities/. To be displayed once the application has just been created, the Finder may need to be restarted. <br><br><b>Enable inline ASM support</b> <br>This enables the inline ASM parser. See the <a href="inlinedasm.html">Inline x86 ASM</a> section of the help-file for more information on this option. <br><br><b>Create unicode executable</b> <br>This tells the compiler to create a <a href="unicode.html">unicode</a> executable. The string management, as well as all PB functions will work with <a href="variables.html">unicode strings</a>. To write unicode text in the sourcefiles, it is recommended to set the text encoding of the sourcefile to UTF8 (see below), as then unicode text can be directly entered in the IDE without problem. <br><br>To debug unicode programs, it is best to select the <a href="ide_debugger.html">Standalone Debugger</a> from the <a href="ide_preferences.html">Preferences</a>, as the debugger that is integrated into the IDE can currently not display unicode strings (it converts them to ascii before displaying them). The standalone Debugger however can handle this. <br><br><b>Create thread-safe executable</b> <br>This tells the compiler to use a special version of certain commands to make them safe to be used in threads. See the <a href="../thread/index.html">Thread library</a> for more information. <br><br>This also enables the <a href="ide_debugger.html">Debugger</a> to display correct information if threads are used. Without this option, the debugger might output wrong line numbers when threads are involved for example. <br><br><b>Enable modern theme support</b> (Windows only) <br>Adds support for skinned windows on Windows XP, Windows Vista, Windows 7 or Windows 8. <br><br><b>Request Administrator mode for Windows Vista and above</b> (Windows only) <br>The created executable will always be started with administrator rights on Windows Vista and above (it will not launch if the administrator password is not entered). This option should be set for programs that need to access restricted folders or restricted areas of the registry to get full access. <br>If this option is turned on, the <a href="ide_debugger.html">standalone debugger</a> will automatically selected when debugging, so the program can be tested in administrator mode. <br><br>Note: This option has no effect when the program is run on other versions of Windows. <br><br><b>Request User mode for Windows Vista and above</b> (Windows only) <br>This option disables the "Virtualization" feature for this executable on Windows Vista and above. Virtualization caused file and registry access to be redirected to a special user folder if the user does not have the needed rights to do the operation (this is done for compatibility with older programs). <br>Note that this redirection is done without notifying the user; this can lead to some confusion if he tries to find saved files on the file-system. Because of this, it is recommended to disable this feature if the program complies with the Windows Vista file/registry access rules. <br><br>Note: This option has no effect when the program is run on other versions of Windows. It cannot be combined with the "Administrator mode" option above. <br><br><b>Enable OnError lines support</b> (Windows only) <br>Includes line numbers information with the executable for the <a href="../onerror/index.html">OnError-Library</a>. <br><br><b>Library Subsystem</b> <br>Here you can select different subsystems for compilation. More than one subsystem can be specified, separated with space character. For more information, see <a href="subsystems.html">subsystems</a>. <br><br><b>Executable format</b> <br>This allows you to specify the created executable format: <br><u>Windows</u> : a normal windows executable. <br><u>Console</u> : an executable with a default console. This one still can create windows and such, but it always has a console open. When executed from a command prompt, this executable type uses the command terminal as its console and writes there, whereas the "Windows" executable would create a separate Console window when using <a href="../console/openconsole.html">OpenConsole()</a>. This setting must be used to create a <a href="../console/index.html">Console</a> application that can have its input/output redirected with pipes. <br><u>Shared DLL</u> : create a windows DLL. See <a href="dll.html">Building a DLL</a> for more info. <br>Note: When you do "Compile/Run" with a DLL source code, it is executed as a normal executable. A dll is only created when you use "create executable". <br><br><b>Cpu Optimisation</b> (next to Executable format) <br>This setting allows to include Cpu optimised PB functions in your executable: <br><u>All CPU</u> : The generic functions are included that run on all CPUs. <br><u>Dynamic CPU</u> : The generic functions as well as any available CPU specific function are included. The function to execute is decided at runtime. This creates a bigger executable, but it will run as fast as possible on all CPUs. <br><u>All other options</u> : Include only the functions for a specific CPU. The executable will not run on any Cpu that does not support this feature. <br><br>Note: No PB functions actually support this feature for now (it is ignored for them). However, some User Libraries include such optimisations. <br><br><b>Linker options file</b> <br>A textfile can be specified here with further command-line options that should be passed to the linker when creating the executable. The file should contain one option per line. 


</blockquote>
<p><b>Compile/Run</b></p><blockquote>





This section contains options that affect how the executable is run from the IDE for testing. 
Except for the tools option, they have no effect when the "Create executable" menu is used. 

 

<p><img src="images/ide_compiler_compile.png"></p>

<b>Enable Debugger</b> 
<br>
This sets the debugger state (on/off) for this source code, or if the main file option 
is used, for that file too. This can also be set from the debugger menu. 

<br>
<br>

<b>Enable Purifier</b> 
<br>
This enables purifier support for the debugger. The purifier can detect a certain type of 
programming errors such as writing past the end of an allocated memory buffer. 
See <a href="ide_debugtools.html">Included debugging tools</a> for more details. 

<br>
<br>

<b>Use selected Debugger</b> 
<br>
This allows to choose a different <a href="ide_debugger.html">debugger type</a> for this file only. 
If this option is disabled, the default debugger is used; this can be specified in the 
<a href="ide_preferences.html">preferences</a>. 

<br>
<br>

<b>Use Warning mode</b> 
<br>
This allows to choose a different <a href="ide_debugger.html">warning mode</a> for this file only. 
If this option is disabled, the default setting is used which can be specified in the 
<a href="ide_preferences.html">preferences</a>. The available options are: 
<br>
<u>Ignore Warnings:</u> Warnings will be ignored without displaying anything. 
<br>
<u>Display Warnings:</u> Warnings will be displayed in the error log and the source 
code line will be marked, but the program continues to run. 
<br>
<u>Treat Warnings as Errors:</u> A warning will be treated like an error. 

<br>
<br>

<b>Executable command-line</b> 
<br>
The string given here will be passed as the command-line to the program when running it from the IDE. 

<br>
<br>

<b>Current directory</b> 
<br>
The directory specified here will be set as the current directory for the program when running it from the IDE. 

<br>
<br>

<b>Create temporary executable in the source directory</b> 
<br>
With this option turned on, the temporary executable file for running the program from the IDE will be 
placed inside the source directory. This can be useful if the program depends on files inside the source 
directory for testing. With this option turned off, the executable is created in the systems temporary directory. 

<br>
<br>

<b>Execute tools</b> 
<br>
Here <a href="ide_externaltools.html">external tools</a> can be enabled on a per-source basis. 
The "Global settings" column shows if the tool is enabled or disabled in the 
<a href="ide_externaltools.html">tools configuration</a>. A tool will only be executed for the source 
if it is both enabled globally and for this source. 

<br>
<br>
Note: For a tool to be listed here, it must have the "Enable Tool on a per-source basis" option 
checked in the <a href="ide_externaltools.html">tools configuration</a> and be executed by a trigger 
that is associated with a source file (i.e. not executed by menu or by editor startup for example). 


 


</blockquote>
<p><b>Constants</b></p><blockquote>





In this section, a set of special editor constants as well as custom constants can be defined 
which will be predefined when compiling this source. 

 

<p><img src="images/ide_compiler_constants.png"></p>

<b>#PB_Editor_CompileCount</b> 
<br>
If enabled, this constant holds the number of times that the code was compiled (both with "Compile/Run" and 
"Create Executable") from the IDE. The counter can be manually edited in the input field. 

<br>
<br>

<b>#PB_Editor_BuildCount</b> 
<br>
If enabled, this constant holds the number of times that the code was compiled with "Create Executable" only. 
The counter can be manually edited in the input field. 

<br>
<br>

<b>#PB_Editor_CreateExecutable</b> 
<br>
If enabled, this constants holds a value of 1 if the code is compiled with the "Create Executable" menu or 
0 if "Compile/Run" was used. 

<br>
<br>

<b>Custom constants</b> 
<br>
Here, custom constants can be defined and then easily switched on/off through checkboxes. 
Constant definitions should be added as they would be written within the source code. 
This provides a way to enable/disable certain features in a program by defining a constant here and then 
checking in the source for it to enable/disable the features with 
<a href="compilerdirectives.html">CompilerIf/CompilerEndIf</a>. 
<br>
<br>
Inside the definition of these constants, environment variables can be used by specifying them 
in a "bash" like style with a "$" in front. The environment variable will be replaced in the constant 
definition before compiling the source. This allows to pass certain options of the system that the 
code is compiled on to the program in the form of constants. 
<br>
<br>
Example: #Creator="$USERNAME" 
<br>
Here, the $USERNAME will be replaced by the username of the logged in user on Windows systems. If 
an environment variable does not exist, it will be replaced by an empty string. 

<br>
<br>
Note: To test within the source code if a constant is defined or not, the <font color="#3A3966">Defined</font>() 
<a href="compilerfunctions.html">compiler function</a> can be used. 




 




</blockquote>
<p><b>Version Information</b></p><blockquote>


<p><img src="images/ide_compiler_version.png"></p>



This is a Windows only feature. By enabling this, a resource is included in the executable with information about your program. 
It can be viewed by right-clicking on the executable in the windows explorer and selecting "Properties". 
Also it can be read by other programs such as setup tools. 
<br>
<br>
Fields marked with a * are required if you want to include the version info (if not all required fields 
are set, the information may not display correctly on some versions of Windows). 
<br>
<br>
The first two fields MUST be composed of 4 numbers separated by commas. All other fields may be any 
string. In the 3 empty boxes, you can define your own fields to include in the Version info block. 
<br>
<br>
In all the string fields, you may include special tokens that are replaced when compiling: 
<br>
%OS : replaced with the version of Windows used to compile the program 
<br>
%SOURCE : replaced with the filename (no path) of the source file. 
<br>
%EXECUTABLE : replaced with the name of the created executable (this only works when "create executable" is used, not with "Compile/Run". 
<br>
%COMPILECOUNT : replaced with the value of the <font color="#924B72">#PB_Editor_CompileCount</font> constant. 
<br>
%BUILDCOUNT : replaced with the value of the <font color="#924B72">#PB_Editor_BuildCount</font> constant. 
<br>
<br>
Furthermore, you can use any token listed with the <a href="../date/formatdate.html">FormatDate()</a> command. These tokens 
will be replaced with their respective meaning in <a href="../date/formatdate.html">FormatDate()</a> used with the date of  the 
compilation (i.e. %yy gives the year of the compilation) 

<br>
<br>
Meaning of the lower 3 fields: 
<br>
<br>

<b>File OS</b> 
<br>
Specifies the OS that this Program is compiled for (Using VOS_DOS or VOS_WINDOWS16 makes little sense. 
They are only included for the sake of completeness). 

<br>
<br>

<b>File Type</b> 
<br>
Type of the executable (Here VFT_UNKNOWN, VFT_APP or VFT_DLL are the only ones that really make sense for PureBasic programs). 

<br>
<br>

<b>Language</b> 
<br>
Specifies the language in which this version info is written. 
<br>
<br>
The fields values can be accessed when compiling the program from the IDE using the following constants (same order): 
 
<pre><font face="Courier New, Courier, mono"size="2">  <font color="#924B72">#PB_Editor_FileVersionNumeric</font>
  <font color="#924B72">#PB_Editor_ProductVersionNumeric</font>
  <font color="#924B72">#PB_Editor_CompanyName</font>
  <font color="#924B72">#PB_Editor_ProductName</font>
  <font color="#924B72">#PB_Editor_ProductVersion</font>
  <font color="#924B72">#PB_Editor_FileVersion</font>
  <font color="#924B72">#PB_Editor_FileDescription</font>
  <font color="#924B72">#PB_Editor_InternalName</font>
  <font color="#924B72">#PB_Editor_OriginalFilename</font>
  <font color="#924B72">#PB_Editor_LegalCopyright</font>
  <font color="#924B72">#PB_Editor_LegalTrademarks</font>
  <font color="#924B72">#PB_Editor_PrivateBuild</font>
  <font color="#924B72">#PB_Editor_SpecialBuild</font>
  <font color="#924B72">#PB_Editor_Email</font>
  <font color="#924B72">#PB_Editor_Website</font>
</font></pre>


</blockquote>
<p><b>Resources</b></p><blockquote>


<p><img src="images/ide_compiler_ressources.png"></p>



This is a Windows only feature. Here you can include as many Resource scripts (*.rc files) as you want. They will be compiled 
and included with the executable. You can use any resource editor (for example the <a href="http://www.christian-heffner.de/index.php?page=start〈=en">PellesC</a> IDE) 
to create such scripts. 

<br>
<br>

Note: Since Resources are a specific to the Windows platform only, PB does not include a 
Library to manage them and they are not further documented here. See documentation on the 
<a href="http://msdn.microsoft.com/library/">Windows API</a> and resources for more information. 




 




</blockquote>
<p><b>Compiler options for projects</b></p><blockquote>


<p><img src="images/ide_compiler_targets.png"></p>



The compiler options for projects allow the definition of multiple compile targets. Each target is 
basically a set of compiler options with a designated source file and output executable. The left 
side of the compiler options window is extended with the list of the defined compile targets. The toolbar 
on top of it allows to create, delete, copy, edit or move targets in the list. 
<br>
<br>
The default target is the one which will be compiled when the "Compile/Run" menu entry is selected. 
It can be quickly switched with the "Set as default target" checkbox or from the compiler menu. 
The "Enable in 'Build all Targets'" option specifies whether or not the selected target will be built 
when the 'Build all Targets' menu entry is used. 
<br>
<br>
The right side of the compiler options is almost the same as in the non-project mode and reflects 
the settings for the compile target that is currently selected on the left. 
The only difference are the "Input source file" and "Output executable" fields on the first tab. 
These fields have to be specified for all compile targets. Other than that, the compiler 
options are identical to the options described above. 
<br>
<br>
In project mode, the information about the compile target is stored in the project file and not in the 
individual source files. Information that belongs to the file (such as the folding state) are still saved 
for the individual source files in the location specified by the <a href="ide_preferences.html">Preferences</a>. 


 


</blockquote>
<p><b>The Build progress window</b></p><blockquote>


<p><img src="images/ide_compiler_build.png"></p>



When the 'Build all Targets' menu entry is selected on an open project, all targets that have the corresponding 
option set in the compiler options will be compiled in the order they are defined in the compiler options. The progress 
window shows the current compile progress as well as the status of each target. When the process is finished, the 
build log can be copied to the clipboard or saved to disk. 
 
</body></html>